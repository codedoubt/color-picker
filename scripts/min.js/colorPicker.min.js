var $=function(t){return"#"==t[0]?document.getElementById(t.slice(1)):"."==t[0]?document.getElementsByClassName(t.slice(1)):document.getElementsByTagName(t)};function ColorPicker(t){var e=t.bound,o=t.boundHandle,n=t.picker,a=t.pickHandle,i=t.slider,l=t.slideHandle,f=t.options,d=t.output,r=t.onchange||function(){},c=n.getContext("2d"),u=i.getContext("2d");function g(t,e){c.fillStyle="hsl("+(t||0)+",100%,50%)",c.rect(0,0,e.width,e.height),c.fill();var o=c.createLinearGradient(0,0,e.width,0),n=c.createLinearGradient(0,0,0,e.height);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),c.fillStyle=o,c.fillRect(0,0,e.width,e.height),c.fillStyle=n,c.fillRect(0,0,e.width,e.height)}draggable(o,{attach:!0,attachTo:"#"+e.id}),draggable(a,{bound:!0,boundTo:"#"+n.id,offLeft:-5,offTop:-5,onmove:L}),draggable(l,{bound:!0,boundTo:"#"+i.id,dragY:!1,offLeft:-10,offTop:-2,onmove:b}),g(null,n);for(var h=0;h<=360;h++)u.fillStyle="hsl("+h+",100%,50%)",u.fillRect(h*i.width/360,0,2,20);i.addEventListener("click",function(t){var o=t.pageX-e.offsetLeft-22.5;log(i.offsetLeft),y(360*o/i.width),b(t)}),n.addEventListener("click",function(t){T(t.clientX-e.offsetLeft-5,t.clientY-e.offsetTop-o.offsetHeight-5),L(t)});var s=function(t){g(t,n)},v=function(t,e){var o=c.getImageData(t,e,1,1);return[o.data[0],o.data[1],o.data[2]]};function p(t){d.value="",d.value=t,cb(t)}function y(t){var e=Math.round(205*t/360)-10;l.style.left=e+"px"}function T(t,e){a.style.top=e+"px",a.style.left=t+"px"}function b(t){(o=t.pageX-e.offsetLeft-22.5)<0&&(o=0),o>i.width&&(o=i.width),log(),g(Math.round(360*o/i.width),n),T();var o,l=a.offsetTop;w(o=a.offsetLeft,l)}function L(t){w(t.clientX-e.offsetLeft-5,t.clientY-e.offsetTop-o.offsetHeight-5)}function w(t,e){t<0&&(t=0),e<0&&(e=0),t>249.5&&(t=249.5),e>249.5&&(e=249.5);var o=v(t,e),n=o[0],a=o[1],i=o[2],l=f.value;p(changeToSelectedType("rgb",l,toRgbString(n,a,i)))}f.addEventListener("change",function(){var t=d.value,e=colorType(t);p(changeToSelectedType(e,this.value,t))}),d.addEventListener("keyup",function(){var t=this.value,e=colorType(t);f.value=t?e:"hex";try{var o=changeToSelectedType(e,"hsl",t),a=o.match(/[0-9]+[.]?[0-9]?[0-9]?/g).filter(function(t){return""!=t}),i=a[0],l=a[1],d=a[2];s(i),y(i);var c=l*n.width/100,u=d*n.width/100;T(c-5,n.width-u-5),r(t)}catch(t){log("wrong input value")}})}